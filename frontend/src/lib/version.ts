// Version format: X.XX.XX
// X   — major (incremental)
// XX  — feature updates (big functionality changes)
// XX  — bugfixes

export const APP_VERSION = "1.25.10"

export interface ChangelogEntry {
  version: string
  date: string
  changes: string[]
}

export const CHANGELOG: ChangelogEntry[] = [
  {
    version: "1.25.10",
    date: "11.02.2026",
    changes: [
      "Восстановлена форма «Приготовить среду» (/ready-media/new) с кнопкой на складе",
      "Фикс 400 Bad Request: calculateAndUpdateCoefficient — убран inner join на lots",
      "Фикс 400 Bad Request: getAvailableMediaByUsage — убран несуществующий FK ready_media→batches",
      "Фикс DialogContent aria-describedby warning (глобально в компоненте dialog.tsx)",
      "Фикс ResponsiveContainer chart width/height — добавлен minWidth/minHeight",
      "Ready media tag фильтрация: fallback на все среды если usage_tags не заданы",
    ],
  },
  {
    version: "1.25.09",
    date: "11.02.2026",
    changes: [
      "Синхронизация веток: портированы фичи с параллельной ветки awesome-bohr",
      "Кинетика роста: calculateCultureMetrics() — Td (время удвоения), CPD (кумулятивные удвоения), PD по пассажам",
      "Прогноз роста: forecastGrowth() — экспоненциальный прогноз по Td",
      "Карточка «Кинетика роста» на странице культуры (5 метрик + таблица по пассажам)",
      "Лот: PD/Td текущего пассажа + прогноз времени до 90% конфлюэнтности",
      "Паспорт культуры: Td текущее/среднее, CPD в статистике + график Td по пассажам",
      "Заморозка: генерация кода банка BK-XXXX (фикс NULL constraint)",
      "Заявки: фильтр «Новые» исправлен (NEW→PENDING)",
      "Пассаж: навигация «Назад» возвращает на карточку лота (если запущен оттуда)",
      "Склад: FEFO-сортировка готовых сред + колонка «Годность» с индикацией",
    ],
  },
  {
    version: "1.25.08",
    date: "11.02.2026",
    changes: [
      "Удалена страница /ready-media (не используется), ссылки перенаправлены на /inventory",
      "Оборудование: кликабельные карточки-фильтры (Работает/Обслуживание/Неисправно/Всего)",
      "Оборудование: кнопка «Удалить» убрана из списка (только из карточки)",
      "Оборудование: QR-печать в карточке (этикетка оборудования + позиции хранения)",
      "Оборудование: смена статуса прямо из карточки (Select без перехода в редактирование)",
      "Справочники: счётчики табов загружаются сразу при открытии страницы (не 0)",
    ],
  },
  {
    version: "1.25.07",
    date: "11.02.2026",
    changes: [
      "Метрики лота: PDL (кумулятивные удвоения), скорость пролиферации, время удвоения, прогноз дней до 80% монослоя",
      "Метрики культуры (Row 3): общее кол-во клеток, средняя viability, общее PDL, средняя пролиферация, средний дорост",
      "Паспорт лота: /lots/[id]/passport — полный документ с печатью и скачиванием",
      "Кнопки «Паспорт» и «Рабочий лист» на странице лота",
      "API: getLotById join culture_type для паспорта лота",
    ],
  },
  {
    version: "1.25.06",
    date: "11.02.2026",
    changes: [
      "Номенклатура: теги назначения (usage_tags) — чекбоксы FEED/DISSOCIATION/WASH/SEED/FREEZING/THAW",
      "Единый выбор сред: готовые среды + партии со склада в одном dropdown'е (Feed, Freeze, Thaw)",
      "Фильтрация сред по назначению: каждый dropdown показывает только подходящие позиции",
      "Fallback: если теги не настроены — все среды/партии доступны (обратная совместимость)",
      "API: parseMediumId, buildMediaOptions, getAvailableMediaByUsage — shared-утилиты",
    ],
  },
  {
    version: "1.25.05",
    date: "11.02.2026",
    changes: [
      "Заморозка: выбор партии криовиалов из склада (CONSUMABLE) с авто-списанием",
      "Склад: карточки статистики стали кликабельными фильтрами (Все/В наличии/Мало/Просрочено)",
      "Склад: добавлен фильтр «Мало» в табы и бейджи «Мало» / «Просрочено» в строках таблицы",
    ],
  },
  {
    version: "1.25.04",
    date: "11.02.2026",
    changes: [
      "Форма заморозки: перестроены шаги (Источник → Снятие клеток → Криовиалы → Заморозка → Сводка)",
      "Форма заморозки: авто-расчёт клеток/виалу, клеток/мл, проверка объёма",
      "Навигация назад: все формы операций — router.back() вместо hardcoded /operations",
      "Пассаж: кнопка Отмена на шаге 1 вместо disabled Назад",
    ],
  },
  {
    version: "1.25.03",
    date: "11.02.2026",
    changes: [
      "Форма осмотра: toggle единый/индивидуальный ввод показателей по контейнерам",
      "Форма осмотра: прикрепление фото к конкретному контейнеру (Supabase Storage)",
      "Метрики лота: наследование от родительского лота, средняя конфлюэнтность",
      "Метрики культуры: кумулятивные показатели (средн. viability, концентрация, кол-во измерений)",
      "Per-lot метрики в развёрнутом виде лота на странице культуры",
      "Таблица container_photos + Storage bucket для фото контейнеров",
    ],
  },
  {
    version: "1.25.02",
    date: "11.02.2026",
    changes: [
      "Метрики операций (viability, concentration, yield) на карточке лота",
      "Уровень доверия (confidence) в прогнозе клеточного выхода",
      "Сводная статистика культуры: клетки, viability, последний осмотр",
      "История расхода партий (inventory_movements) на карточке партии",
    ],
  },
  {
    version: "1.25.01",
    date: "10.02.2026",
    changes: [
      "Исправлен фильтр готовых сред на складе",
      "Исправлены ошибки TypeScript (Tooltip formatter, OrderStatus, implicit any)",
      "Обновлены пути в техдокументации",
    ],
  },
  {
    version: "1.25.00",
    date: "10.02.2026",
    changes: [
      "Списание сред SEED: пофлаконный учёт, дополнительные компоненты",
      "Списание сред замораживания: диссоциация, промывка, крио-среда",
      "Workflow выдачи заказов: резервирование, выдача, отмена",
      "Прогноз клеточного выхода на странице лота",
      "QR-этикетки для контейнеров и банков",
      "Графики конфлюэнтности в паспорте культуры",
      "Уведомления об обслуживании оборудования на дашборде",
      "Бейджи срочности ТО на странице оборудования",
      "Версионирование и журнал изменений",
    ],
  },
  {
    version: "1.24.00",
    date: "09.02.2026",
    changes: [
      "UX-улучшения: статусы контейнеров, навигация",
      "Единая схема именования: лоты, контейнеры, криопробирки",
      "Исправление ошибки 400 пассажа (end_date в лотах)",
      "Иерархические позиции оборудования, древовидный выбор",
      "Деактивация/удаление оборудования",
    ],
  },
  {
    version: "1.23.00",
    date: "08.02.2026",
    changes: [
      "Операция замораживания: выбор банка, генерация криопробирок",
      "Операция размораживания: выбор криопробирок, создание контейнеров",
      "Управление заказами: создание, отслеживание статусов",
      "Справочники: готовые среды, типы тканей, номенклатура",
      "Мониторинг оборудования: логи показателей, параметры",
    ],
  },
  {
    version: "1.22.00",
    date: "07.02.2026",
    changes: [
      "Операции: осмотр, подкормка, пассаж",
      "Складской учёт: партии, расходники, FEFO",
      "Сканирование QR-кодов камерой",
      "Уведомления и задачи",
      "Паспорт культуры с историей операций",
    ],
  },
  {
    version: "1.21.00",
    date: "06.02.2026",
    changes: [
      "Базовая структура: культуры, лоты, контейнеры, банки",
      "Доноры и донации",
      "Оборудование и позиции",
      "Дашборд с статистикой",
      "Авторизация и ролевая модель",
    ],
  },
]
